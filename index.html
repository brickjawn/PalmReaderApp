<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystic Palm & Elements</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@400;500;600;700&display=swap');
        
        :root {
            --primary: #7C3AED;
            --primary-light: #8B5CF6;
            --primary-dark: #6D28D9;
            --secondary: #475569;
            --accent: #F59E0B;
            --background: #F8FAFC;
            --card: #FFFFFF;
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --border: #E2E8F0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Trippy animated background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff9ff3, #54a0ff);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 255, 198, 0.3) 0%, transparent 50%);
            animation: floatingOrbs 20s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes floatingOrbs {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        .font-display {
            font-family: 'Cormorant Garamond', serif;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 2rem 1rem;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .card {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            text-align: center;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .button {
            background-color: var(--primary);
            color: white;
            font-weight: 500;
            padding: 0.875rem 1.75rem;
            border-radius: 0.75rem;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-block;
            width: 100%;
            margin-top: 1rem;
            font-size: 1rem;
            letter-spacing: 0.025em;
        }

        .button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }

        .button:active {
            transform: translateY(0);
        }

        .button-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .button-secondary:hover {
            background-color: #334155;
        }

        .tab-button {
            background-color: transparent;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 0.75rem 1.25rem;
            border-radius: 0.75rem;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0 0.375rem;
            font-size: 0.9375rem;
        }

        .tab-button.active {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .tab-button:hover:not(.active) {
            background-color: var(--background);
            border-color: var(--primary);
            color: var(--primary);
        }

        .hidden {
            display: none !important;
        }

        label {
            display: block;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
            text-align: left;
            font-size: 0.9375rem;
        }

        input[type="file"] {
            border: 2px dashed var(--border);
            padding: 1.5rem;
            border-radius: 1rem;
            cursor: pointer;
            display: block;
            width: 100%;
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            transition: all 0.2s ease;
        }

        input[type="file"]:hover {
            border-color: var(--primary);
            background-color: rgba(124, 58, 237, 0.05);
        }

        input[type="file"]::file-selector-button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.625rem 1.25rem;
            border-radius: 0.5rem;
            cursor: pointer;
            margin-right: 0.75rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        input[type="file"]::file-selector-button:hover {
            background-color: var(--primary-dark);
        }

        #palmImagePreview, #analyzingPalmImageDisplay, #readingPalmImage {
            max-width: 100%;
            max-height: 300px;
            border-radius: 1rem;
            margin: 1.5rem auto;
            display: block;
            border: 1px solid var(--border);
            object-fit: contain;
        }

        .reading-text {
            text-align: left;
            color: var(--text-primary);
        }

        .reading-text p {
            margin-bottom: 1rem;
            line-height: 1.75;
            color: var(--text-secondary);
        }

        .reading-text strong, .reading-text h4 {
            color: var(--text-primary);
            font-weight: 600;
            margin-top: 1rem;
            margin-bottom: 0.5rem;
        }

        select {
            width: 100%;
            padding: 0.875rem;
            border-radius: 0.75rem;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
            background-color: white;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s ease;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236B7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.5em;
            padding-right: 2.5rem;
        }

        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }

        .scan-container {
            position: relative;
            display: inline-block;
            border-radius: 1rem;
            overflow: hidden;
        }

        .scan-line {
            position: absolute;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
            box-shadow: 0 0 15px var(--primary);
            animation: scan-anim 3s ease-in-out infinite;
            border-radius: 2px;
        }

        @keyframes scan-anim {
            0% { top: 0%; opacity: 0.5; }
            50% { opacity: 1; }
            100% { top: 100%; opacity: 0.5; }
        }

        .loader {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            animation: spin 1s linear infinite;
            margin: 1.5rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--background);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div id="welcomeScreen" class="card">
            <h1 class="text-3xl font-display font-bold text-gray-800 mb-4">Mystic Palm & Elements</h1>
            <p class="text-gray-600 mb-6">Unveil the secrets held within your hand and the cosmos. Upload a picture of your palm to begin your journey.</p>
            <button id="startScanButton" class="button">Begin Your Reading</button>
        </div>

        <div id="uploadScreen" class="card hidden">
            <h2 class="text-2xl font-display font-semibold text-gray-700 mb-4">Upload Your Palm Images</h2>
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                <p class="text-yellow-800">
                    <span class="font-semibold">💫 Complete Reading Required:</span> 
                    For a full and accurate reading, you'll need to upload both your left and right hands. The left hand reveals your inherent traits, while the right hand shows your current path.
                </p>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-6">
                <h3 class="text-blue-800 font-medium mb-2">📸 Quick Tips</h3>
                <div class="text-xs text-blue-700 grid grid-cols-2 gap-1">
                    <div>• Good lighting</div>
                    <div>• Palm flat & steady</div>
                    <div>• Wrist to fingertips</div>
                    <div>• Sharp focus</div>
                </div>
            </div>

            <div class="flex gap-4 mb-6">
                <div class="flex-1 p-4 border-2 border-gray-200 rounded-lg flex flex-col">
                    <h3 class="font-display text-lg mb-2">Left Hand</h3>
                    <p class="text-sm text-gray-500 mb-4">Your potential & inherited traits</p>
                    <div class="relative mb-2 flex-grow">
                        <img id="leftHandPreview" src="#" alt="Left Palm Preview" class="hidden w-full h-48 object-contain rounded-lg border border-gray-200"/>
                        <button id="removeLeftImageButton" class="absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full shadow-lg hidden hover:bg-red-600 transition-colors" aria-label="Remove left hand image">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="file" id="leftHandInput" accept="image/*" class="hidden">
                    <button onclick="document.getElementById('leftHandInput').click()" class="button button-secondary w-full mt-auto">Upload Left Hand</button>
                </div>
                <div class="flex-1 p-4 border-2 border-gray-200 rounded-lg flex flex-col">
                    <h3 class="font-display text-lg mb-2">Right Hand</h3>
                    <p class="text-sm text-gray-500 mb-4">Your current path & achievements</p>
                    <div class="relative mb-2 flex-grow">
                        <img id="rightHandPreview" src="#" alt="Right Palm Preview" class="hidden w-full h-48 object-contain rounded-lg border border-gray-200"/>
                        <button id="removeRightImageButton" class="absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full shadow-lg hidden hover:bg-red-600 transition-colors" aria-label="Remove right hand image">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="file" id="rightHandInput" accept="image/*" class="hidden">
                    <button onclick="document.getElementById('rightHandInput').click()" class="button button-secondary w-full mt-auto">Upload Right Hand</button>
                </div>
            </div>

            <button id="startAnalysisButton" class="button" disabled>Begin Complete Palm Reading</button>
            <p id="uploadStatus" class="text-sm text-gray-500 mt-2">Please upload both hands for a complete reading.</p>
            <button id="backToWelcomeButton" class="button button-secondary mt-4">Back</button>
        </div>
        
        <div id="analyzingScreen" class="card hidden">
            <h2 class="text-2xl font-display font-semibold text-gray-700 mb-4">Analyzing Your Palm...</h2>
            <p class="text-gray-600 mb-4">Glimpsing into the patterns of your unique hand. Please wait a moment.</p>
            <div class="scan-container mx-auto mb-4" style="max-width: 200px; max-height:200px;">
                <img id="analyzingPalmImageDisplay" src="#" alt="Analyzing Palm"/>
                <div class="scan-line"></div>
            </div>
            <div class="loader"></div>
        </div>


        <div id="mainContentScreen" class="card hidden">
            <div class="flex flex-wrap justify-center mb-6 border-b pb-3">
                <button id="tabPalmLines" class="tab-button active">Palm Lines</button>
                <button id="tabElement" class="tab-button">Your Element</button>
                <button id="tabAstro" class="tab-button">Astro-Link</button>
            </div>
            <img id="readingPalmImage" src="#" alt="Your Palm" class="hidden mb-4"/>

            <div id="palmLinesContent">
                <h3 class="text-xl font-display font-semibold text-gray-700 mb-1">Insights from Your Palm Lines</h3>
                <p class="text-sm text-gray-500 mb-4">Our mystical scan has revealed characteristics of your major lines.</p>
                <button id="revealPalmLineInsightsButton" class="button">Reveal Palm Line Insights</button>
                <div id="palmLineReadingResult" class="reading-text mt-4 hidden"></div>
            </div>

            <div id="elementTypeContent" class="hidden">
                <h3 class="text-xl font-display font-semibold text-gray-700 mb-2">Your Revealed Elemental Hand</h3>
                <p class="text-sm text-gray-500 mb-4">The energies of your hand shape have been identified by our scan.</p>
                <button id="revealElementalHandInsightsButton" class="button">Reveal Elemental Hand Insights</button>
                <div id="elementReadingResult" class="reading-text mt-4 hidden"></div>
            </div>

            <div id="astroPalmistryContent" class="hidden">
                <h3 class="text-xl font-display font-semibold text-gray-700 mb-2">Astrology & Palmistry Connection</h3>
                <p class="text-sm text-gray-500 mb-4">Explore how your identified elemental hand type may intertwine with your astrological sign.</p>
                <div class="mb-4">
                    <label for="astrologicalSignSelect">Select Your Astrological Sign:</label>
                    <select id="astrologicalSignSelect">
                        <option value="">-- Select Sign --</option>
                        <option value="aries">Aries (Fire)</option>
                        <option value="taurus">Taurus (Earth)</option>
                        <option value="gemini">Gemini (Air)</option>
                        <option value="cancer">Cancer (Water)</option>
                        <option value="leo">Leo (Fire)</option>
                        <option value="virgo">Virgo (Earth)</option>
                        <option value="libra">Libra (Air)</option>
                        <option value="scorpio">Scorpio (Water)</option>
                        <option value="sagittarius">Sagittarius (Fire)</option>
                        <option value="capricorn">Capricorn (Earth)</option>
                        <option value="aquarius">Aquarius (Air)</option>
                        <option value="pisces">Pisces (Water)</option>
                    </select>
                </div>
                <button id="getAstroReadingButton" class="button">Get Astro-Palmistry Insights</button>
                <div id="astroReadingResult" class="reading-text mt-4 hidden"></div>
            </div>
             <button id="scanAgainButton" class="button button-secondary mt-6">Start New Reading</button>
        </div>

    </div>

    <footer class="w-full max-w-2xl mx-auto px-4 py-8 text-center">
        <div class="mb-4">
            <a href="https://twitter.com/crocboot" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-primary hover:text-primary-dark transition-colors">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
                </svg>
                <span class="font-medium">Follow @crocboot</span>
            </a>
        </div>
        <p class="text-sm text-gray-500 max-w-prose mx-auto leading-relaxed">
            Palmistry is widely considered a form of cultural, historical, and entertainment-based interpretation rather than a scientifically validated predictive method. The readings provided by PalmReadingApp are meant for personal reflection and enjoyment, not as professional guidance, medical advice, or factual predictions.
        </p>
    </footer>

    <script>
        // Wrap everything in DOMContentLoaded to ensure elements exist
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const welcomeScreen = document.getElementById('welcomeScreen');
            const uploadScreen = document.getElementById('uploadScreen');
            const analyzingScreen = document.getElementById('analyzingScreen');
            const mainContentScreen = document.getElementById('mainContentScreen');

            const startScanButton = document.getElementById('startScanButton');
            const backToWelcomeButton = document.getElementById('backToWelcomeButton');
            const startAnalysisButton = document.getElementById('startAnalysisButton');
            
            const analyzingPalmImageDisplay = document.getElementById('analyzingPalmImageDisplay');
            const readingPalmImage = document.getElementById('readingPalmImage');

            const tabPalmLines = document.getElementById('tabPalmLines');
            const tabElement = document.getElementById('tabElement');
            const tabAstro = document.getElementById('tabAstro');

            const palmLinesContent = document.getElementById('palmLinesContent');
            const elementTypeContent = document.getElementById('elementTypeContent');
            const astroPalmistryContent = document.getElementById('astroPalmistryContent');

            const revealPalmLineInsightsButton = document.getElementById('revealPalmLineInsightsButton');
            const palmLineReadingResult = document.getElementById('palmLineReadingResult');
            const revealElementalHandInsightsButton = document.getElementById('revealElementalHandInsightsButton');
            const elementReadingResult = document.getElementById('elementReadingResult');

            const astrologicalSignSelect = document.getElementById('astrologicalSignSelect');
            const getAstroReadingButton = document.getElementById('getAstroReadingButton');
            const astroReadingResult = document.getElementById('astroReadingResult');
            
            const scanAgainButton = document.getElementById('scanAgainButton');

            // File upload elements
            const leftHandInput = document.getElementById('leftHandInput');
            const rightHandInput = document.getElementById('rightHandInput');
            const leftHandPreview = document.getElementById('leftHandPreview');
            const rightHandPreview = document.getElementById('rightHandPreview');
            const removeLeftImageButton = document.getElementById('removeLeftImageButton');
            const removeRightImageButton = document.getElementById('removeRightImageButton');
            const uploadStatus = document.getElementById('uploadStatus');

            // App State
            const userSelections = {
                palmLines: {
                    left: {},
                    right: {}
                },
                elementHand: {
                    left: null,
                    right: null
                },
                astrologicalSign: null
            };

            // Track uploaded images
            const uploadedImages = {
                left: null,
                right: null
            };

            // Palm Reading Data
            const palmData = {
                handMeanings: {
                    left: "Your left hand reveals your innate potential, genetic predispositions, and inherited traits. It shows the raw material you were given at birth - your natural talents, inherent challenges, and the karmic lessons carried from past lives. This hand tells the story of what was written in your stars.",
                    right: "Your right hand represents your current journey, personal growth, and conscious choices. It shows how you've shaped your destiny, overcome challenges, and developed your abilities. This hand reveals the story you're actively writing in this lifetime."
                },
                palmLineDefinitions: [
                    {
                        id: 'lifeLine',
                        name: "Life Line",
                        description: "The life line reveals vitality, life force, and major life changes",
                        options: [
                            { value: 'deep', text: "Deep and clearly marked" },
                            { value: 'chained', text: "Chain-like or broken" },
                            { value: 'straight', text: "Straight and close to thumb" },
                            { value: 'curved', text: "Widely curved" },
                            { value: 'islanded', text: "Contains islands or splits" },
                            { value: 'double', text: "Double life line" },
                            { value: 'long', text: "Long and sweeping" }
                        ]
                    },
                    {
                        id: 'headLine',
                        name: "Head Line",
                        description: "The head line shows intellectual capacity, communication style, and mental approach",
                        options: [
                            { value: 'long', text: "Long and straight" },
                            { value: 'curved', text: "Curved downward" },
                            { value: 'separated', text: "Separated from life line" },
                            { value: 'wavy', text: "Wavy or forked" },
                            { value: 'short', text: "Short and straight" },
                            { value: 'deep', text: "Deep and clear" },
                            { value: 'chained', text: "Chain-like formation" }
                        ]
                    },
                    {
                        id: 'heartLine',
                        name: "Heart Line",
                        description: "The heart line indicates emotional capacity, relationships, and love life",
                        options: [
                            { value: 'curved', text: "Curved upward" },
                            { value: 'straight', text: "Straight across" },
                            { value: 'forked', text: "Forked at end" },
                            { value: 'chained', text: "Chain-like formation" },
                            { value: 'deep', text: "Deep and clear" },
                            { value: 'long', text: "Long and sweeping" },
                            { value: 'short', text: "Short and defined" }
                        ]
                    },
                    {
                        id: 'fateLine',
                        name: "Fate Line",
                        description: "The fate line shows career path, life direction, and major life events",
                        options: [
                            { value: 'deep', text: "Deep and unbroken" },
                            { value: 'broken', text: "Broken or fragmented" },
                            { value: 'starting', text: "Starts from life line" },
                            { value: 'missing', text: "Faint or absent" },
                            { value: 'branched', text: "Multiple branches" },
                            { value: 'chained', text: "Chain-like pattern" },
                            { value: 'island', text: "Contains islands" }
                        ]
                    },
                    {
                        id: 'sunLine',
                        name: "Sun Line",
                        description: "The sun line indicates fame, success, and creative expression",
                        options: [
                            { value: 'present', text: "Clear and present" },
                            { value: 'absent', text: "Absent or very faint" },
                            { value: 'multiple', text: "Multiple lines" },
                            { value: 'broken', text: "Broken or fragmented" },
                            { value: 'deep', text: "Deep and prominent" },
                            { value: 'branched', text: "Branching upward" }
                        ]
                    }
                ],
                palmLineReadings: {
                    lifeLine: {
                        left: {
                            deep: "Your inherited vitality is remarkably strong. You come from a lineage of resilient individuals, and this deep life line suggests you were born with natural endurance and a robust constitution. Your ancestors have passed down a powerful life force that serves as a foundation for longevity and resilience.",
                            chained: "Your inherited energy patterns show some natural fluctuations. This suggests that adaptability runs in your family, and you've inherited the ability to navigate life's changing rhythms. Your ancestors' experiences have taught you the value of resilience through challenges.",
                            straight: "You've inherited a naturally conservative approach to energy management. Your lineage values efficiency and practicality, suggesting you were born with an innate ability to maintain steady progress and preserve your resources wisely.",
                            curved: "Your inherited spirit is naturally adventurous. Your ancestry carries a legacy of exploration and adaptability, suggesting you were born with an innate desire to experience life fully and embrace new horizons.",
                            islanded: "Your inherited life path contains natural periods of transformation. These genetic patterns suggest you were born with an innate ability to evolve and adapt, carrying your ancestors' wisdom of navigating life's transitions.",
                            double: "You possess an extraordinary inherited vitality. This rare pattern suggests you were born with a backup system of energy and protection, indicating strong ancestral support and natural resilience.",
                            long: "Your inherited life force is expansive and far-reaching. This pattern suggests you come from a lineage of long-lived individuals, carrying their potential for endurance and sustained vitality."
                        },
                        right: {
                            deep: "You've developed remarkable physical and emotional stamina through your life choices. Your current path shows strong vitality and a well-maintained energy system, indicating you've learned to channel your life force effectively.",
                            chained: "Your current energy management shows conscious adaptation to life's rhythms. You've learned to pace yourself and handle various energy levels, developing resilience through experience.",
                            straight: "You've cultivated a practical approach to managing your vitality. Your current path reflects careful energy conservation and efficient use of resources, showing wisdom in maintaining life balance.",
                            curved: "You've actively expanded your life's boundaries and embraced diverse experiences. Your current path shows a dynamic approach to living, with energy flowing freely into various aspects of life.",
                            islanded: "Your life path shows conscious periods of transformation and renewal. You've learned to use challenging times as opportunities for growth and regeneration.",
                            double: "You've developed an exceptional secondary support system in life. This indicates you've built strong protective networks and backup resources for your journey.",
                            long: "You've cultivated extensive vitality through conscious lifestyle choices. Your current path shows commitment to longevity and sustainable energy management."
                        }
                    },
                    headLine: {
                        left: {
                            long: "You were born with a natural capacity for deep analytical thinking. Your inherited mental abilities favor detailed analysis and comprehensive understanding, suggesting strong intellectual genes in your family line.",
                            curved: "Your inherited creative intelligence is significant. This pattern suggests natural artistic abilities and intuitive understanding passed down through your family line.",
                            separated: "Independence of thought is your birthright. This separation indicates inherited mental autonomy and natural innovative thinking abilities.",
                            wavy: "You inherited a versatile and adaptable mind. Your mental flexibility comes from a lineage of creative problem-solvers and multi-faceted thinkers.",
                            short: "Your inherited thinking style favors quick, instinctive decisions. This suggests a family history of practical intelligence and efficient mental processing.",
                            deep: "You possess naturally strong mental clarity and focus. This depth indicates inherited intellectual strength and mental resilience.",
                            chained: "Your inherited mental patterns show natural periods of intense analysis followed by intuitive understanding. This suggests a family history of complex problem-solving abilities."
                        },
                        right: {
                            long: "You've developed sophisticated analytical abilities through education and experience. Your current mental approach shows disciplined thinking and detailed analysis.",
                            curved: "You've cultivated strong creative thinking skills. Your current mental approach balances logic with imagination, showing developed artistic and innovative abilities.",
                            separated: "You've established strong mental independence. Your current thinking patterns show self-reliance and original thought processes.",
                            wavy: "You've developed versatile thinking strategies. Your current mental approach shows adaptability and the ability to handle multiple perspectives.",
                            short: "You've refined your ability to make quick, effective decisions. Your current mental approach favors practical solutions and efficient processing.",
                            deep: "You've cultivated strong mental focus and clarity. Your current thinking patterns show developed concentration and analytical abilities.",
                            chained: "You've developed a rhythmic approach to mental work. Your current thinking patterns show balanced periods of analysis and intuition."
                        }
                    },
                    heartLine: {
                        left: {
                            curved: "You were born with natural emotional warmth and expressiveness. Your inherited emotional nature is generous and idealistic, suggesting a family legacy of open-hearted connections.",
                            straight: "Your inherited emotional nature is naturally steady and reliable. This suggests a family history of stable, committed relationships and emotional consistency.",
                            forked: "You inherited a naturally nuanced emotional understanding. This pattern suggests an innate ability to balance different types of relationships and emotional experiences.",
                            chained: "Your inherited emotional sensitivity is complex and deep. This pattern suggests a family history of rich emotional experiences and intuitive understanding.",
                            deep: "You possess naturally strong emotional awareness and stability. This suggests inherited emotional intelligence and depth of feeling.",
                            long: "Your inherited emotional capacity is expansive and generous. This suggests a family legacy of deep emotional connections and lasting relationships.",
                            short: "You inherited a focused and selective emotional nature. This suggests a family history of meaningful, carefully chosen relationships."
                        },
                        right: {
                            curved: "You've developed a warm and expressive emotional style. Your current approach to relationships shows generosity and romantic idealism.",
                            straight: "You've cultivated emotional stability and reliability. Your current relationship approach values consistency and commitment.",
                            forked: "You've developed sophisticated emotional understanding. Your current relationship style shows ability to balance various emotional needs.",
                            chained: "You've developed complex emotional awareness. Your current emotional life shows depth and sensitivity in relationships.",
                            deep: "You've cultivated strong emotional intelligence. Your current relationship approach shows maturity and emotional wisdom.",
                            long: "You've developed expansive emotional connections. Your current relationship style shows generosity and deep involvement.",
                            short: "You've cultivated focused and meaningful relationships. Your current emotional approach values quality over quantity."
                        }
                    },
                    fateLine: {
                        left: {
                            deep: "Your inherited sense of purpose is strong and clear. This suggests a family legacy of determined goal-pursuit and clear life direction.",
                            broken: "Your inherited path shows natural flexibility. This pattern suggests a family history of successful adaptation to changing circumstances.",
                            starting: "Your inherited purpose is closely tied to personal identity. This suggests a family legacy of self-determined success.",
                            missing: "Your inherited path favors flexibility and free will. This suggests a family history of creating success through unconventional means.",
                            branched: "You inherited multiple talents and potential paths. This suggests a family legacy of diverse achievements and opportunities.",
                            chained: "Your inherited path shows natural phases of development. This suggests a family history of gradual, steady progress.",
                            island: "Your inherited path contains periods of special focus. This suggests a family history of overcoming challenges through concentration."
                        },
                        right: {
                            deep: "You've developed a strong sense of purpose and direction. Your current path shows clear goals and determined progress.",
                            broken: "You've learned to adapt and thrive through changes. Your current path shows resilience and flexibility in achieving goals.",
                            starting: "You've created your own path to success. Your current direction shows strong personal initiative and self-determination.",
                            missing: "You've developed unconventional routes to success. Your current path shows creative approaches to achievement.",
                            branched: "You've developed multiple successful directions. Your current path shows diverse achievements and opportunities.",
                            chained: "You've developed a steady approach to progress. Your current path shows consistent development and growth.",
                            island: "You've learned to focus intensely on specific goals. Your current path shows successful navigation of challenges."
                        }
                    },
                    sunLine: {
                        left: {
                            present: "You inherited natural charisma and potential for recognition. This suggests a family legacy of achievement and public success.",
                            absent: "Your inherited path favors behind-the-scenes influence. This suggests a family history of meaningful private achievements.",
                            multiple: "You inherited diverse talents for recognition. This suggests a family legacy of varied accomplishments and public appreciation.",
                            broken: "Your inherited path shows phases of public recognition. This suggests a family history of periodic achievements and acknowledgment.",
                            deep: "You inherited strong potential for public success. This suggests a family legacy of significant achievements and recognition.",
                            branched: "You inherited multiple paths to recognition. This suggests a family legacy of diverse talents and public appreciation."
                        },
                        right: {
                            present: "You've developed strong presence and earned recognition. Your current path shows achievement and public acknowledgment.",
                            absent: "You've cultivated meaningful influence through private channels. Your current achievements focus on personal fulfillment.",
                            multiple: "You've developed various paths to recognition. Your current achievements show diversity and broad appreciation.",
                            broken: "You've experienced different phases of recognition. Your current path shows periodic achievements and acknowledgment.",
                            deep: "You've cultivated significant public success. Your current path shows strong achievement and recognition.",
                            branched: "You've developed multiple channels for recognition. Your current path shows diverse talents and public appreciation."
                        }
                    }
                },
                elementHandDefinitions: [
                    {
                        id: 'elementHand',
                        name: "Elemental Hand",
                        options: [
                            { value: 'earth', text: "Earth Hand" },
                            { value: 'fire', text: "Fire Hand" },
                            { value: 'water', text: "Water Hand" },
                            { value: 'air', text: "Air Hand" }
                        ]
                    }
                ],
                elementReadings: {
                    earth: "<strong>Earth Hand Traits:</strong> You are likely practical, reliable, and grounded. You value stability and tangible results, often possessing a strong connection to nature and a down-to-earth approach to life. You build things to last but can sometimes be resistant to change.",
                    fire: "<strong>Fire Hand Traits:</strong> You are likely passionate, ambitious, energetic, and enthusiastic. You are a natural leader, often inspiring others, but can also be impulsive or restless. You thrive on action and new challenges.",
                    water: "<strong>Water Hand Traits:</strong> You are likely intuitive, creative, empathetic, and emotionally sensitive. You navigate the world through your feelings and imagination, often possessing artistic talents and a deep understanding of others. You seek connection and can be adaptable.",
                    air: "<strong>Air Hand Traits:</strong> You are likely intellectual, communicative, analytical, and curious. You thrive on ideas, social interaction, and mental stimulation. You are often witty and logical, but can sometimes be prone to overthinking or anxiety."
                },
                astroSignInteractions: {
                    earth: {
                        earth: "An Earth hand with an Earth astrological sign (Taurus, Virgo, Capricorn) creates a profoundly grounded and stable individual. Your practicality is doubled, making you exceptionally reliable, patient, and connected to the material world. You build with enduring strength.",
                        air: "An Earth hand with an Air astrological sign (Gemini, Libra, Aquarius) blends practicality with intellect. You can bring abstract ideas into tangible form. Your communication is thoughtful, and you seek logical solutions to real-world problems.",
                        fire: "An Earth hand with a Fire astrological sign (Aries, Leo, Sagittarius) combines steadfastness with dynamism. You have the energy to pursue practical goals with passion and the determination to see ambitious projects through.",
                        water: "An Earth hand with a Water astrological sign (Cancer, Scorpio, Pisces) suggests a nurturing and deeply intuitive practicality. You ground your emotions in tangible actions and care, creating a secure and supportive environment."
                    },
                    fire: {
                        earth: "A Fire hand with an Earth astrological sign (Taurus, Virgo, Capricorn) channels passionate energy into practical achievements. You have the drive to make tangible progress and the stamina to pursue ambitious, real-world goals.",
                        air: "A Fire hand with an Air astrological sign (Gemini, Libra, Aquarius) creates a dynamic communicator and innovator. Your enthusiasm fuels intellectual pursuits, and you can inspire others with your bold ideas and quick wit.",
                        fire: "A Fire hand with a Fire astrological sign (Aries, Leo, Sagittarius) results in an intensely passionate and energetic individual. You are a force of nature, driven by enthusiasm, courage, and a desire to lead and explore.",
                        water: "A Fire hand with a Water astrological sign (Cancer, Scorpio, Pisces) blends passionate action with deep emotional intuition. You can pursue your goals with fervor while being highly attuned to the emotional undercurrents around you."
                    },
                    water: {
                        earth: "A Water hand with an Earth astrological sign (Taurus, Virgo, Capricorn) suggests that your intuitive and emotional nature finds expression in practical, caring ways. You offer stable support and create beauty in the tangible world.",
                        air: "A Water hand with an Air astrological sign (Gemini, Libra, Aquarius) combines emotional depth with intellectual curiosity. You can articulate complex feelings and ideas, fostering understanding and connection through communication.",
                        fire: "A Water hand with a Fire astrological sign (Aries, Leo, Sagittarius) creates a dynamic individual whose emotions fuel their passions. You are likely charismatic and inspiring, channeling your sensitivity into enthusiastic action.",
                        water: "A Water hand with a Water astrological sign (Cancer, Scorpio, Pisces) results in profound emotional depth, intuition, and empathy. You are highly attuned to the unseen world and navigate life through your feelings and creative expression."
                    },
                    air: {
                        earth: "An Air hand with an Earth astrological sign (Taurus, Virgo, Capricorn) grounds intellectual pursuits in practical application. You are a thoughtful planner, capable of developing logical systems and achieving tangible results through careful analysis.",
                        air: "An Air hand with an Air astrological sign (Gemini, Libra, Aquarius) creates a highly intellectual, communicative, and social individual. You thrive on ideas, information exchange, and connecting with diverse groups of people.",
                        fire: "An Air hand with a Fire astrological sign (Aries, Leo, Sagittarius) blends intellectual agility with passionate enthusiasm. You can articulate bold visions and inspire action through your dynamic ideas and persuasive communication.",
                        water: "An Air hand with a Water astrological sign (Cancer, Scorpio, Pisces) suggests an ability to intellectually understand and communicate deep emotional insights. You may be a gifted counselor or writer, bridging logic and intuition."
                    }
                },
                astrologicalSignToElement: {
                    aries: 'fire', taurus: 'earth', gemini: 'air', cancer: 'water',
                    leo: 'fire', virgo: 'earth', libra: 'air', scorpio: 'water',
                    sagittarius: 'fire', capricorn: 'earth', aquarius: 'air', pisces: 'water'
                }
            };

            // Hand detection setup
            let hands;
            let handDetectionReady = false;
            
            // Initialize MediaPipe Hands
            async function initializeHandDetection() {
                try {
                    const { Hands } = window;
                    hands = new Hands({
                        locateFile: (file) => {
                            return `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`;
                        }
                    });
                    
                    hands.setOptions({
                        maxNumHands: 2,
                        modelComplexity: 1,
                        minDetectionConfidence: 0.5,
                        minTrackingConfidence: 0.5
                    });
                    
                    handDetectionReady = true;
                    console.log('Hand detection initialized');
                } catch (error) {
                    console.warn('Hand detection unavailable, using basic validation:', error);
                    handDetectionReady = false;
                }
            }
            
            // Enhanced image quality assessment
            function assessImageQuality(imageElement) {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = imageElement.naturalWidth;
                canvas.height = imageElement.naturalHeight;
                ctx.drawImage(imageElement, 0, 0);
                
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;
                
                // Calculate image sharpness (edge detection)
                let sharpness = 0;
                for (let i = 0; i < data.length - 4; i += 4) {
                    const diff = Math.abs(data[i] - data[i + 4]);
                    sharpness += diff;
                }
                sharpness = sharpness / (data.length / 4);
                
                // Calculate brightness and contrast
                let brightness = 0;
                let contrast = 0;
                for (let i = 0; i < data.length; i += 4) {
                    const gray = (data[i] + data[i + 1] + data[i + 2]) / 3;
                    brightness += gray;
                }
                brightness = brightness / (data.length / 4);
                
                // Calculate contrast
                let variance = 0;
                for (let i = 0; i < data.length; i += 4) {
                    const gray = (data[i] + data[i + 1] + data[i + 2]) / 3;
                    variance += Math.pow(gray - brightness, 2);
                }
                contrast = Math.sqrt(variance / (data.length / 4));
                
                return {
                    sharpness,
                    brightness,
                    contrast,
                    resolution: canvas.width * canvas.height,
                    aspectRatio: canvas.width / canvas.height,
                    score: (sharpness * 0.4) + (contrast * 0.3) + (brightness > 50 && brightness < 200 ? 50 : 0) + (canvas.width > 800 ? 20 : 0)
                };
            }
            
            // Validate if image contains a hand
            async function validateHandImage(imageElement) {
                return new Promise((resolve) => {
                    if (!handDetectionReady) {
                        // Enhanced fallback validation
                        const quality = assessImageQuality(imageElement);
                        const isReasonableSize = quality.resolution > 40000; // At least 200x200
                        const isReasonableAspectRatio = quality.aspectRatio > 0.5 && quality.aspectRatio < 2;
                        const hasGoodQuality = quality.score > 30;
                        
                        resolve(isReasonableSize && isReasonableAspectRatio && hasGoodQuality);
                        return;
                    }
                    
                    try {
                        let handDetected = false;
                        
                        hands.onResults((results) => {
                            handDetected = results.multiHandLandmarks && results.multiHandLandmarks.length > 0;
                            resolve(handDetected);
                        });
                        
                        // Send image to MediaPipe
                        hands.send({ image: imageElement });
                        
                        // Timeout after 5 seconds
                        setTimeout(() => {
                            if (!handDetected) {
                                resolve(false);
                            }
                        }, 5000);
                        
                    } catch (error) {
                        console.error('Hand detection error:', error);
                        resolve(false);
                    }
                });
            }
            
            // Enhanced palm line analysis with detailed characteristics
            function simulatePalmLineAnalysis(hand) {
                console.log(`Simulating enhanced palm line analysis for ${hand} hand`);
                
                // Generate comprehensive line characteristics with more detail
                const lineCharacteristics = {
                    lifeLine: {
                        depth: ['very_deep', 'deep', 'moderate', 'shallow'][Math.floor(Math.random() * 4)],
                        length: ['very_long', 'long', 'moderate', 'short'][Math.floor(Math.random() * 4)],
                        clarity: ['very_clear', 'clear', 'somewhat_clear', 'unclear'][Math.floor(Math.random() * 4)],
                        curve: ['wide_curve', 'moderate_curve', 'slight_curve', 'straight'][Math.floor(Math.random() * 4)],
                        breaks: ['none', 'minor', 'moderate', 'major'][Math.floor(Math.random() * 4)],
                        islands: ['none', 'few', 'several', 'many'][Math.floor(Math.random() * 4)],
                        branches: ['none', 'upward', 'downward', 'multiple'][Math.floor(Math.random() * 4)],
                        // Additional detailed characteristics
                        start_position: ['high', 'middle', 'low'][Math.floor(Math.random() * 3)],
                        end_position: ['wrist', 'thumb_base', 'middle'][Math.floor(Math.random() * 3)],
                        texture: ['smooth', 'slightly_rough', 'chain_like'][Math.floor(Math.random() * 3)],
                        color_intensity: ['strong', 'moderate', 'faint'][Math.floor(Math.random() * 3)]
                    },
                    headLine: {
                        length: ['very_long', 'long', 'moderate', 'short'][Math.floor(Math.random() * 4)],
                        direction: ['straight', 'slightly_curved', 'curved', 'very_curved'][Math.floor(Math.random() * 4)],
                        depth: ['very_deep', 'deep', 'moderate', 'shallow'][Math.floor(Math.random() * 4)],
                        separation: ['joined', 'slightly_separated', 'separated', 'widely_separated'][Math.floor(Math.random() * 4)],
                        ending: ['straight', 'forked', 'curved_down', 'multiple_branches'][Math.floor(Math.random() * 4)],
                        islands: ['none', 'few', 'several'][Math.floor(Math.random() * 3)],
                        chains: ['none', 'beginning', 'middle', 'throughout'][Math.floor(Math.random() * 4)],
                        // Additional characteristics
                        slope: ['steep', 'moderate', 'gentle'][Math.floor(Math.random() * 3)],
                        connection_strength: ['strong', 'weak', 'disconnected'][Math.floor(Math.random() * 3)],
                        secondary_lines: ['none', 'few', 'many'][Math.floor(Math.random() * 3)]
                    },
                    heartLine: {
                        curve: ['high_curve', 'moderate_curve', 'slight_curve', 'straight'][Math.floor(Math.random() * 4)],
                        length: ['very_long', 'long', 'moderate', 'short'][Math.floor(Math.random() * 4)],
                        depth: ['very_deep', 'deep', 'moderate', 'shallow'][Math.floor(Math.random() * 4)],
                        ending: ['under_jupiter', 'between_jupiter_saturn', 'under_saturn', 'forked'][Math.floor(Math.random() * 4)],
                        branches: ['none', 'upward', 'downward', 'multiple'][Math.floor(Math.random() * 4)],
                        chains: ['none', 'few', 'many'][Math.floor(Math.random() * 3)],
                        islands: ['none', 'few', 'several'][Math.floor(Math.random() * 3)],
                        // Additional characteristics
                        start_position: ['high', 'middle', 'low'][Math.floor(Math.random() * 3)],
                        quality: ['clear', 'broken', 'wavy'][Math.floor(Math.random() * 3)],
                        crosses: ['none', 'few', 'several'][Math.floor(Math.random() * 3)]
                    },
                    fateLine: {
                        presence: ['strong', 'moderate', 'weak', 'absent'][Math.floor(Math.random() * 4)],
                        origin: ['wrist', 'life_line', 'mount_moon', 'middle_palm'][Math.floor(Math.random() * 4)],
                        direction: ['straight', 'curved', 'wavy'][Math.floor(Math.random() * 3)],
                        breaks: ['none', 'minor', 'major', 'multiple'][Math.floor(Math.random() * 4)],
                        branches: ['none', 'few', 'many'][Math.floor(Math.random() * 3)],
                        islands: ['none', 'few', 'several'][Math.floor(Math.random() * 3)],
                        // Additional characteristics
                        termination: ['head_line', 'heart_line', 'finger_base'][Math.floor(Math.random() * 3)],
                        strength: ['consistent', 'varying', 'intermittent'][Math.floor(Math.random() * 3)],
                        timing_marks: ['clear', 'faint', 'none'][Math.floor(Math.random() * 3)]
                    },
                    sunLine: {
                        presence: ['strong', 'moderate', 'weak', 'absent'][Math.floor(Math.random() * 4)],
                        origin: ['heart_line', 'head_line', 'life_line', 'wrist'][Math.floor(Math.random() * 4)],
                        clarity: ['very_clear', 'clear', 'faint'][Math.floor(Math.random() * 3)],
                        branches: ['none', 'few', 'many'][Math.floor(Math.random() * 3)],
                        // Additional characteristics
                        parallel_lines: ['none', 'one', 'multiple'][Math.floor(Math.random() * 3)],
                        crosses: ['none', 'few'][Math.floor(Math.random() * 2)],
                        stars: ['none', 'present'][Math.floor(Math.random() * 2)]
                    },
                    marriageLines: {
                        number: ['none', 'one', 'two', 'three_or_more'][Math.floor(Math.random() * 4)],
                        depth: ['deep', 'moderate', 'shallow'][Math.floor(Math.random() * 3)],
                        length: ['long', 'moderate', 'short'][Math.floor(Math.random() * 3)],
                        direction: ['straight', 'curved_up', 'curved_down'][Math.floor(Math.random() * 3)],
                        // Additional characteristics
                        spacing: ['close', 'moderate', 'wide'][Math.floor(Math.random() * 3)],
                        intersections: ['none', 'few'][Math.floor(Math.random() * 2)],
                        forks: ['none', 'beginning', 'end'][Math.floor(Math.random() * 3)]
                    },
                    travelLines: {
                        number: ['none', 'few', 'several', 'many'][Math.floor(Math.random() * 4)],
                        clarity: ['clear', 'moderate', 'faint'][Math.floor(Math.random() * 3)],
                        // Additional characteristics
                        direction: ['horizontal', 'diagonal', 'mixed'][Math.floor(Math.random() * 3)],
                        connection: ['life_line', 'fate_line', 'independent'][Math.floor(Math.random() * 3)]
                    },
                    // Additional minor lines for comprehensive reading
                    healthLine: {
                        presence: ['strong', 'moderate', 'weak', 'absent'][Math.floor(Math.random() * 4)],
                        clarity: ['clear', 'broken', 'wavy'][Math.floor(Math.random() * 3)],
                        position: ['close_life_line', 'middle_palm', 'outer_edge'][Math.floor(Math.random() * 3)]
                    },
                    intuitionLine: {
                        presence: ['strong', 'moderate', 'weak', 'absent'][Math.floor(Math.random() * 4)],
                        curve: ['pronounced', 'moderate', 'slight'][Math.floor(Math.random() * 3)]
                    },
                    moneyLines: {
                        number: ['none', 'few', 'several'][Math.floor(Math.random() * 3)],
                        clarity: ['clear', 'faint'][Math.floor(Math.random() * 2)]
                    }
                };
                
                userSelections.palmLines[hand] = lineCharacteristics;
                console.log(`Generated comprehensive palm line analysis for ${hand} hand:`, lineCharacteristics);
            }

            function simulateElementalHandAnalysis(hand) {
                console.log(`Simulating elemental hand analysis for ${hand} hand`);
                
                // Enhanced hand matching logic
                if (hand === 'right' && userSelections.elementHand.left) {
                    // Get image quality scores
                    const leftQuality = uploadedImages.leftQuality || 50;
                    const rightQuality = uploadedImages.rightQuality || 50;
                    
                    console.log(`Left hand quality: ${leftQuality}, Right hand quality: ${rightQuality}`);
                    
                    // Enhanced matching criteria
                    const qualityDifference = Math.abs(leftQuality - rightQuality);
                    const significantQualityDifference = qualityDifference > 25; // Increased threshold
                    
                    if (significantQualityDifference) {
                        // Use the better quality image as reference
                        if (rightQuality > leftQuality) {
                            console.log('Right hand has significantly better quality, using as reference');
                            // Generate new element for right hand and apply to both
                            const elementOptions = palmData.elementHandDefinitions[0].options;
                            const selectedElement = elementOptions[Math.floor(Math.random() * elementOptions.length)];
                            userSelections.elementHand.left = selectedElement.value;
                            userSelections.elementHand.right = selectedElement.value;
                            
                            // Also regenerate left hand palm lines to match right hand quality
                            simulatePalmLineAnalysis('left');
                        } else {
                            console.log('Left hand has significantly better quality, using as reference');
                            // Use left hand's element for right hand
                            userSelections.elementHand.right = userSelections.elementHand.left;
                        }
                    } else {
                        // Similar quality - ensure consistency by using left hand as baseline
                        console.log('Similar quality images, maintaining consistency with left hand');
                        
                        // Force consistency: same element for both hands
                        userSelections.elementHand.right = userSelections.elementHand.left;
                        
                        // Optional: adjust some palm line characteristics to be similar but not identical
                        if (userSelections.palmLines.left && userSelections.palmLines.right) {
                            // Ensure major lines have similar characteristics
                            const leftLines = userSelections.palmLines.left;
                            const rightLines = userSelections.palmLines.right;
                            
                            // Make life line depth similar
                            if (leftLines.lifeLine && rightLines.lifeLine) {
                                const leftDepth = leftLines.lifeLine.depth;
                                // Make right hand depth similar but potentially slightly different
                                const depthOptions = ['very_deep', 'deep', 'moderate', 'shallow'];
                                const leftIndex = depthOptions.indexOf(leftDepth);
                                const similarDepthIndex = Math.max(0, Math.min(depthOptions.length - 1, 
                                    leftIndex + (Math.random() > 0.5 ? 1 : -1) * (Math.random() > 0.7 ? 1 : 0)));
                                rightLines.lifeLine.depth = depthOptions[similarDepthIndex];
                            }
                            
                            // Make heart line curve similar
                            if (leftLines.heartLine && rightLines.heartLine) {
                                const leftCurve = leftLines.heartLine.curve;
                                const curveOptions = ['high_curve', 'moderate_curve', 'slight_curve', 'straight'];
                                const leftIndex = curveOptions.indexOf(leftCurve);
                                const similarCurveIndex = Math.max(0, Math.min(curveOptions.length - 1,
                                    leftIndex + (Math.random() > 0.5 ? 1 : -1) * (Math.random() > 0.8 ? 1 : 0)));
                                rightLines.heartLine.curve = curveOptions[similarCurveIndex];
                            }
                            
                            // Make head line length similar
                            if (leftLines.headLine && rightLines.headLine) {
                                const leftLength = leftLines.headLine.length;
                                const lengthOptions = ['very_long', 'long', 'moderate', 'short'];
                                const leftIndex = lengthOptions.indexOf(leftLength);
                                const similarLengthIndex = Math.max(0, Math.min(lengthOptions.length - 1,
                                    leftIndex + (Math.random() > 0.5 ? 1 : -1) * (Math.random() > 0.8 ? 1 : 0)));
                                rightLines.headLine.length = lengthOptions[similarLengthIndex];
                            }
                        }
                    }
                } else {
                    // First hand analysis or left hand analysis
                    const elementOptions = palmData.elementHandDefinitions[0].options;
                    const randomElement = elementOptions[Math.floor(Math.random() * elementOptions.length)];
                    userSelections.elementHand[hand] = randomElement.value;
                    
                    console.log(`Selected ${randomElement.value} element for ${hand} hand`);
                }
            }

            // Event Listeners
            if (startScanButton) {
                startScanButton.addEventListener('click', () => {
                    console.log('Start scan clicked');
                    if (uploadScreen) {
                        showScreen(uploadScreen);
                    } else {
                        console.error('Upload screen not found');
                    }
                });
            } else {
                console.error('Start scan button not found');
            }

            if (backToWelcomeButton) {
                backToWelcomeButton.addEventListener('click', () => {
                    console.log('Back to welcome clicked');
                    resetAppState();
                    showScreen(welcomeScreen);
                });
            }

            if (startAnalysisButton) {
                startAnalysisButton.addEventListener('click', () => {
                    console.log('Start analysis clicked');
                    if (!uploadedImages.left || !uploadedImages.right) {
                        alert("Please upload both hands before starting the analysis.");
                        return;
                    }
                    
                    if (analyzingPalmImageDisplay) {
                        analyzingPalmImageDisplay.src = uploadedImages.left;
                    }
                    if (readingPalmImage) {
                        readingPalmImage.src = uploadedImages.left;
                    }
                    showScreen(analyzingScreen);

                    setTimeout(() => {
                        simulatePalmLineAnalysis('left');
                        simulateElementalHandAnalysis('left');
                        
                        if (analyzingPalmImageDisplay) {
                            analyzingPalmImageDisplay.src = uploadedImages.right;
                        }
                        setTimeout(() => {
                            simulatePalmLineAnalysis('right');
                            simulateElementalHandAnalysis('right');
                            
                            if (readingPalmImage) {
                                readingPalmImage.classList.remove('hidden');
                            }
                            setActiveTab(tabPalmLines, palmLinesContent);
                            showScreen(mainContentScreen);
                        }, 2000);
                    }, 2000);
                });
            }

            // File Upload Handlers
            function handleFileUpload(event, hand) {
                console.log(`Handling file upload for ${hand} hand`);
                const file = event.target.files[0];
                const preview = hand === 'left' ? leftHandPreview : rightHandPreview;
                const removeButton = hand === 'left' ? removeLeftImageButton : removeRightImageButton;
                const input = event.target;

                if (file) {
                    // Validate file type
                    if (!file.type.startsWith('image/')) {
                        showErrorMessage('Please upload an image file', hand);
                        input.value = '';
                        return;
                    }
                    
                    // Validate file size (max 10MB)
                    if (file.size > 10 * 1024 * 1024) {
                        showErrorMessage('Image file is too large. Please upload an image smaller than 10MB', hand);
                        input.value = '';
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = async function(e) {
                        // Create temporary image element for validation
                        const tempImg = new Image();
                        tempImg.onload = async function() {
                            try {
                                // Show loading message
                                const loadingDiv = document.createElement('div');
                                loadingDiv.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 max-w-md text-center';
                                loadingDiv.innerHTML = `
                                    <div class="flex items-center">
                                        <svg class="animate-spin w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24">
                                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
                                        </svg>
                                        <span>Validating ${hand} hand image...</span>
                                    </div>
                                `;
                                document.body.appendChild(loadingDiv);
                                
                                // Validate hand detection
                                const isValidHand = await validateHandImage(tempImg);
                                
                                // Assess and store image quality
                                const imageQuality = assessImageQuality(tempImg);
                                uploadedImages[`${hand}Quality`] = imageQuality.score;
                                
                                // Remove loading message
                                if (loadingDiv.parentNode) {
                                    loadingDiv.parentNode.removeChild(loadingDiv);
                                }
                                
                                if (!isValidHand) {
                                    showErrorMessage(`No hand detected in ${hand} hand image. Please upload a clear photo of your ${hand} hand palm.`, hand);
                                    input.value = '';
                                    return;
                                }
                                
                                // If validation passes, update the preview
                                if (preview) {
                                    preview.src = e.target.result;
                                    preview.classList.remove('hidden');
                                }
                                if (removeButton) {
                                    removeButton.classList.remove('hidden');
                                }
                                uploadedImages[hand] = e.target.result;
                                updateUploadStatus();
                                
                                // Show success message
                                const successDiv = document.createElement('div');
                                successDiv.className = 'fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 max-w-md text-center';
                                successDiv.innerHTML = `
                                    <div class="flex items-center">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                        <span>${hand.charAt(0).toUpperCase() + hand.slice(1)} hand validated successfully!</span>
                                    </div>
                                `;
                                document.body.appendChild(successDiv);
                                
                                setTimeout(() => {
                                    if (successDiv.parentNode) {
                                        successDiv.parentNode.removeChild(successDiv);
                                    }
                                }, 3000);
                                
                            } catch (error) {
                                console.error('Validation error:', error);
                                showErrorMessage('Error validating image. Please try again.', hand);
                                input.value = '';
                            }
                        };
                        
                        tempImg.onerror = function() {
                            showErrorMessage('Invalid image file. Please upload a valid image.', hand);
                            input.value = '';
                        };
                        
                        tempImg.src = e.target.result;
                    };
                    
                    reader.onerror = function() {
                        showErrorMessage('Error reading image file. Please try again.', hand);
                        input.value = '';
                    };
                    
                    reader.readAsDataURL(file);
                }
            }

            function removeImage(hand) {
                const input = hand === 'left' ? leftHandInput : rightHandInput;
                const preview = hand === 'left' ? leftHandPreview : rightHandPreview;
                const removeButton = hand === 'left' ? removeLeftImageButton : removeRightImageButton;

                if (input) input.value = '';
                if (preview) {
                    preview.src = '#';
                    preview.classList.add('hidden');
                }
                if (removeButton) removeButton.classList.add('hidden');
                uploadedImages[hand] = null;
                updateUploadStatus();
            }

            function updateUploadStatus() {
                const bothUploaded = uploadedImages.left && uploadedImages.right;
                if (startAnalysisButton) {
                    startAnalysisButton.disabled = !bothUploaded;
                    if (bothUploaded) {
                        startAnalysisButton.classList.remove('opacity-50', 'cursor-not-allowed');
                    } else {
                        startAnalysisButton.classList.add('opacity-50', 'cursor-not-allowed');
                    }
                }
                
                if (uploadStatus) {
                    if (bothUploaded) {
                        uploadStatus.textContent = "Both hands uploaded - ready for reading!";
                        uploadStatus.className = "text-sm text-green-600 mt-2";
                    } else if (!uploadedImages.left && !uploadedImages.right) {
                        uploadStatus.textContent = "Please upload both hands for a complete reading.";
                        uploadStatus.className = "text-sm text-gray-500 mt-2";
                    } else {
                        const missing = !uploadedImages.left ? "left" : "right";
                        uploadStatus.textContent = `Please upload your ${missing} hand to complete the reading.`;
                        uploadStatus.className = "text-sm text-yellow-600 mt-2";
                    }
                }
            }

            // Attach file upload event listeners
            if (leftHandInput) {
                leftHandInput.addEventListener('change', (e) => {
                    console.log('Left hand file selected');
                    handleFileUpload(e, 'left');
                });
            } else {
                console.error('Left hand input not found');
            }

            if (rightHandInput) {
                rightHandInput.addEventListener('change', (e) => {
                    console.log('Right hand file selected');
                    handleFileUpload(e, 'right');
                });
            } else {
                console.error('Right hand input not found');
            }

            if (removeLeftImageButton) {
                removeLeftImageButton.addEventListener('click', () => removeImage('left'));
            }
            if (removeRightImageButton) {
                removeRightImageButton.addEventListener('click', () => removeImage('right'));
            }

            // Initial setup
            console.log('Initializing app...');
            if (welcomeScreen) {
                console.log('Showing welcome screen');
                showScreen(welcomeScreen);
            } else {
                console.error('Welcome screen not found');
            }

            // Event listeners for the reading buttons
            if (revealPalmLineInsightsButton) {
                revealPalmLineInsightsButton.addEventListener('click', () => {
                    console.log('Revealing palm line insights');
                    let readingHtml = '';
                    
                    // Add left hand readings
                    readingHtml += '<h4 class="text-lg font-semibold mb-2">Left Hand - Inherited Traits & Potential</h4>';
                    readingHtml += '<p class="mb-4">' + palmData.handMeanings.left + '</p>';
                    
                    readingHtml += generateDetailedLineReading('left', userSelections.palmLines.left);
                    
                    // Add right hand readings
                    readingHtml += '<h4 class="text-lg font-semibold mt-6 mb-2">Right Hand - Current Path & Achievements</h4>';
                    readingHtml += '<p class="mb-4">' + palmData.handMeanings.right + '</p>';
                    
                    readingHtml += generateDetailedLineReading('right', userSelections.palmLines.right);
                    
                    if (palmLineReadingResult) {
                        palmLineReadingResult.innerHTML = readingHtml;
                        palmLineReadingResult.classList.remove('hidden');
                        revealPalmLineInsightsButton.classList.add('hidden');
                    }
                });
            }

            if (revealElementalHandInsightsButton) {
                revealElementalHandInsightsButton.addEventListener('click', () => {
                    console.log('Revealing elemental hand insights');
                    let readingHtml = '';
                    
                    // Add left hand element reading
                    const leftElement = userSelections.elementHand.left;
                    if (leftElement && palmData.elementReadings[leftElement]) {
                        readingHtml += '<h4 class="text-lg font-semibold mb-2">Left Hand Element</h4>';
                        readingHtml += palmData.elementReadings[leftElement];
                    }
                    
                    // Add right hand element reading
                    const rightElement = userSelections.elementHand.right;
                    if (rightElement && palmData.elementReadings[rightElement]) {
                        readingHtml += '<h4 class="text-lg font-semibold mt-6 mb-2">Right Hand Element</h4>';
                        readingHtml += palmData.elementReadings[rightElement];
                    }
                    
                    if (elementReadingResult) {
                        elementReadingResult.innerHTML = readingHtml;
                        elementReadingResult.classList.remove('hidden');
                        revealElementalHandInsightsButton.classList.add('hidden');
                    }
                });
            }

            if (getAstroReadingButton) {
                getAstroReadingButton.addEventListener('click', () => {
                    console.log('Getting astro reading');
                    const selectedSign = astrologicalSignSelect.value;
                    if (!selectedSign) {
                        alert('Please select your astrological sign first.');
                        return;
                    }
                    
                    const signElement = palmData.astrologicalSignToElement[selectedSign];
                    let readingHtml = '';
                    
                    // Add left hand astro-element interaction
                    const leftElement = userSelections.elementHand.left;
                    if (leftElement && palmData.astroSignInteractions[leftElement][signElement]) {
                        readingHtml += '<h4 class="text-lg font-semibold mb-2">Left Hand & Astrological Influence</h4>';
                        readingHtml += `<p>${palmData.astroSignInteractions[leftElement][signElement]}</p>`;
                    }
                    
                    // Add right hand astro-element interaction
                    const rightElement = userSelections.elementHand.right;
                    if (rightElement && palmData.astroSignInteractions[rightElement][signElement]) {
                        readingHtml += '<h4 class="text-lg font-semibold mt-6 mb-2">Right Hand & Astrological Influence</h4>';
                        readingHtml += `<p>${palmData.astroSignInteractions[rightElement][signElement]}</p>`;
                    }
                    
                    if (astroReadingResult) {
                        astroReadingResult.innerHTML = readingHtml;
                        astroReadingResult.classList.remove('hidden');
                    }
                });
            }

            if (scanAgainButton) {
                scanAgainButton.addEventListener('click', () => {
                    console.log('Starting new reading');
                    resetAppState();
                    showScreen(welcomeScreen);
                });
            }

            // Tab navigation
            [tabPalmLines, tabElement, tabAstro].forEach(tab => {
                if (tab) {
                    tab.addEventListener('click', () => {
                        console.log('Tab clicked:', tab.id);
                        switch(tab.id) {
                            case 'tabPalmLines':
                                setActiveTab(tabPalmLines, palmLinesContent);
                                break;
                            case 'tabElement':
                                setActiveTab(tabElement, elementTypeContent);
                                break;
                            case 'tabAstro':
                                setActiveTab(tabAstro, astroPalmistryContent);
                                break;
                        }
                    });
                }
            });

            // Function to generate detailed line readings
            function generateDetailedLineReading(hand, lineData) {
                let html = '';
                
                // Life Line Analysis
                if (lineData.lifeLine) {
                    html += '<div class="mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 rounded-lg border-l-4 border-red-400">';
                    html += '<h5 class="text-lg font-semibold text-red-700 mb-2">🌟 Life Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your life force, vitality, and major life changes</p>';
                    
                    const life = lineData.lifeLine;
                    html += `<p class="mb-2"><strong>Depth & Clarity:</strong> ${getLifeLineDepthReading(life.depth, life.clarity, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Length & Curve:</strong> ${getLifeLineLengthReading(life.length, life.curve, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Breaks & Islands:</strong> ${getLifeLineBreaksReading(life.breaks, life.islands, hand)}</p>`;
                    html += `<p><strong>Branches:</strong> ${getLifeLineBranchesReading(life.branches, hand)}</p>`;
                    html += '</div>';
                }
                
                // Head Line Analysis
                if (lineData.headLine) {
                    html += '<div class="mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border-l-4 border-blue-400">';
                    html += '<h5 class="text-lg font-semibold text-blue-700 mb-2">🧠 Head Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your intellectual capacity, thinking style, and mental approach</p>';
                    
                    const head = lineData.headLine;
                    html += `<p class="mb-2"><strong>Length & Direction:</strong> ${getHeadLineLengthReading(head.length, head.direction, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Depth & Separation:</strong> ${getHeadLineDepthReading(head.depth, head.separation, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Ending & Formation:</strong> ${getHeadLineEndingReading(head.ending, head.chains, hand)}</p>`;
                    html += `<p><strong>Islands & Patterns:</strong> ${getHeadLineIslandsReading(head.islands, hand)}</p>`;
                    html += '</div>';
                }
                
                // Heart Line Analysis
                if (lineData.heartLine) {
                    html += '<div class="mb-6 p-4 bg-gradient-to-r from-pink-50 to-rose-50 rounded-lg border-l-4 border-pink-400">';
                    html += '<h5 class="text-lg font-semibold text-pink-700 mb-2">💖 Heart Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your emotional nature, relationships, and love life</p>';
                    
                    const heart = lineData.heartLine;
                    html += `<p class="mb-2"><strong>Curve & Length:</strong> ${getHeartLineCurveReading(heart.curve, heart.length, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Depth & Ending:</strong> ${getHeartLineDepthReading(heart.depth, heart.ending, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Branches & Chains:</strong> ${getHeartLineBranchesReading(heart.branches, heart.chains, hand)}</p>`;
                    html += `<p><strong>Islands & Patterns:</strong> ${getHeartLineIslandsReading(heart.islands, hand)}</p>`;
                    html += '</div>';
                }
                
                // Fate Line Analysis
                if (lineData.fateLine) {
                    html += '<div class="mb-6 p-4 bg-gradient-to-r from-purple-50 to-violet-50 rounded-lg border-l-4 border-purple-400">';
                    html += '<h5 class="text-lg font-semibold text-purple-700 mb-2">⭐ Fate Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your career path, life direction, and destiny</p>';
                    
                    const fate = lineData.fateLine;
                    html += `<p class="mb-2"><strong>Presence & Origin:</strong> ${getFateLinePresenceReading(fate.presence, fate.origin, hand)}</p>`;
                    html += `<p class="mb-2"><strong>Direction & Breaks:</strong> ${getFateLineDirectionReading(fate.direction, fate.breaks, hand)}</p>`;
                    html += `<p><strong>Branches & Islands:</strong> ${getFateLineBranchesReading(fate.branches, fate.islands, hand)}</p>`;
                    html += '</div>';
                }
                
                // Sun Line Analysis
                if (lineData.sunLine) {
                    html += '<div class="mb-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border-l-4 border-yellow-400">';
                    html += '<h5 class="text-lg font-semibold text-yellow-700 mb-2">☀️ Sun Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your success, fame, and creative expression</p>';
                    
                    const sun = lineData.sunLine;
                    html += `<p class="mb-2"><strong>Presence & Origin:</strong> ${getSunLinePresenceReading(sun.presence, sun.origin, hand)}</p>`;
                    html += `<p><strong>Clarity & Branches:</strong> ${getSunLineClarityReading(sun.clarity, sun.branches, hand)}</p>`;
                    html += '</div>';
                }
                
                // Marriage Lines Analysis
                if (lineData.marriageLines) {
                    html += '<div class="mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-l-4 border-green-400">';
                    html += '<h5 class="text-lg font-semibold text-green-700 mb-2">💍 Marriage Lines Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your relationships, partnerships, and emotional bonds</p>';
                    
                    const marriage = lineData.marriageLines;
                    html += `<p class="mb-2"><strong>Number & Depth:</strong> ${getMarriageLinesReading(marriage.number, marriage.depth, hand)}</p>`;
                    html += `<p><strong>Length & Direction:</strong> ${getMarriageDirectionReading(marriage.length, marriage.direction, hand)}</p>`;
                    html += '</div>';
                }
                
                // Travel Lines Analysis
                if (lineData.travelLines) {
                    html += '<div class="mb-4 p-4 bg-gradient-to-r from-teal-50 to-cyan-50 rounded-lg border-l-4 border-teal-400">';
                    html += '<h5 class="text-lg font-semibold text-teal-700 mb-2">✈️ Travel Lines Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your journeys, adventures, and life changes</p>';
                    
                    const travel = lineData.travelLines;
                    html += `<p><strong>Travel Patterns:</strong> ${getTravelLinesReading(travel.number, travel.clarity, hand)}</p>`;
                    if (travel.direction && travel.connection) {
                        html += `<p class="mt-2"><strong>Travel Style:</strong> ${getTravelDirectionReading(travel.direction, travel.connection, hand)}</p>`;
                    }
                    html += '</div>';
                }

                // Health Line Analysis (if present)
                if (lineData.healthLine && lineData.healthLine.presence !== 'absent') {
                    html += '<div class="mb-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 rounded-lg border-l-4 border-emerald-400">';
                    html += '<h5 class="text-lg font-semibold text-emerald-700 mb-2">🌿 Health Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your wellness patterns and health awareness</p>';
                    
                    const health = lineData.healthLine;
                    html += `<p><strong>Health Indicators:</strong> ${getHealthLineReading(health.presence, health.clarity, hand)}</p>`;
                    if (health.position) {
                        html += `<p class="mt-2"><strong>Health Focus:</strong> ${getHealthPositionReading(health.position, hand)}</p>`;
                    }
                    html += '</div>';
                }

                // Intuition Line Analysis (if present)
                if (lineData.intuitionLine && lineData.intuitionLine.presence !== 'absent') {
                    html += '<div class="mb-4 p-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border-l-4 border-indigo-400">';
                    html += '<h5 class="text-lg font-semibold text-indigo-700 mb-2">🔮 Intuition Line Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your psychic abilities and inner wisdom</p>';
                    
                    const intuition = lineData.intuitionLine;
                    html += `<p><strong>Intuitive Capacity:</strong> ${getIntuitionLineReading(intuition.presence, intuition.curve, hand)}</p>`;
                    html += '</div>';
                }

                // Money Lines Analysis (if present)
                if (lineData.moneyLines && lineData.moneyLines.number !== 'none') {
                    html += '<div class="mb-4 p-4 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg border-l-4 border-amber-400">';
                    html += '<h5 class="text-lg font-semibold text-amber-700 mb-2">💰 Wealth Lines Analysis</h5>';
                    html += '<p class="text-sm text-gray-600 mb-3">Your financial potential and wealth accumulation patterns</p>';
                    
                    const money = lineData.moneyLines;
                    html += `<p><strong>Financial Indicators:</strong> ${getMoneyLinesReading(money.number, money.clarity, hand)}</p>`;
                    html += '</div>';
                }
                
                return html;
            }

            // Detailed reading functions for Life Line
            function getLifeLineDepthReading(depth, clarity, hand) {
                const handContext = hand === 'left' ? 'inherited vitality' : 'developed stamina';
                
                let reading = '';
                if (depth === 'very_deep' && clarity === 'very_clear') {
                    reading = `Your ${handContext} is exceptionally strong. This indicates profound physical resilience and an unshakeable life force. `;
                } else if (depth === 'deep') {
                    reading = `Your ${handContext} is robust and well-established. You possess reliable energy reserves and good health potential. `;
                } else if (depth === 'moderate') {
                    reading = `Your ${handContext} is balanced and steady. You maintain consistent energy levels with natural rhythms. `;
                } else {
                    reading = `Your ${handContext} tends toward sensitivity. You may need to be mindful of energy conservation and self-care. `;
                }
                
                if (clarity === 'very_clear') {
                    reading += 'The clarity suggests unwavering life direction and strong physical constitution.';
                } else if (clarity === 'clear') {
                    reading += 'The clear formation indicates good health awareness and steady life progress.';
                } else if (clarity === 'somewhat_clear') {
                    reading += 'Some variations suggest periods of adjustment and adaptation in your life journey.';
                } else {
                    reading += 'The unclear formation suggests you may experience fluctuating energy and need extra attention to wellness.';
                }
                
                return reading;
            }
            
            function getLifeLineLengthReading(length, curve, hand) {
                const handContext = hand === 'left' ? 'natural longevity potential' : 'current life approach';
                
                let reading = '';
                if (length === 'very_long') {
                    reading = `Your ${handContext} indicates exceptional endurance and a long, fulfilling life journey. `;
                } else if (length === 'long') {
                    reading = `Your ${handContext} suggests good longevity and sustained vitality throughout life. `;
                } else if (length === 'moderate') {
                    reading = `Your ${handContext} shows balanced life energy with focus on quality over quantity. `;
                } else {
                    reading = `Your ${handContext} emphasizes intensity and purposeful living in each moment. `;
                }
                
                if (curve === 'wide_curve') {
                    reading += 'The wide curve indicates an adventurous spirit and desire to experience life fully.';
                } else if (curve === 'moderate_curve') {
                    reading += 'The moderate curve suggests balanced exploration and practical wisdom.';
                } else if (curve === 'slight_curve') {
                    reading += 'The gentle curve indicates careful life choices and conservative energy management.';
                } else {
                    reading += 'The straight line suggests efficiency, directness, and practical approach to life.';
                }
                
                return reading;
            }
            
            function getLifeLineBreaksReading(breaks, islands, hand) {
                const handContext = hand === 'left' ? 'inherited resilience patterns' : 'life transformation abilities';
                
                let reading = '';
                if (breaks === 'none' && islands === 'none') {
                    reading = `Your ${handContext} show unbroken strength and continuous life flow. This indicates remarkable stability and resistance to major disruptions.`;
                } else if (breaks === 'minor') {
                    reading = `Minor breaks in your ${handContext} suggest small but significant life transitions. These represent growth periods and positive changes.`;
                } else if (breaks === 'moderate') {
                    reading = `Moderate breaks indicate important life transformations that have shaped or will shape your journey. These mark periods of renewal and redirection.`;
                } else if (breaks === 'major') {
                    reading = `Major breaks represent profound life changes and rebirth experiences. Your ${handContext} show incredible ability to overcome and transform.`;
                }
                
                if (islands === 'few') {
                    reading += ' Small islands indicate brief periods of uncertainty that lead to greater wisdom.';
                } else if (islands === 'several') {
                    reading += ' Multiple islands suggest complex life experiences that build character and depth.';
                } else if (islands === 'many') {
                    reading += ' Numerous islands indicate a rich, multi-layered life with many learning opportunities.';
                }
                
                return reading;
            }
            
            function getLifeLineBranchesReading(branches, hand) {
                const handContext = hand === 'left' ? 'inherited potential paths' : 'achieved life directions';
                
                if (branches === 'none') {
                    return `Your ${handContext} show focused, single-minded determination and clear life direction.`;
                } else if (branches === 'upward') {
                    return `Upward branches in your ${handContext} indicate ambition, success, and positive life developments. These suggest achievement and recognition.`;
                } else if (branches === 'downward') {
                    return `Downward branches suggest grounding influences and practical considerations in your ${handContext}. This indicates wisdom gained through experience.`;
                } else {
                    return `Multiple branches in your ${handContext} show diverse interests, varied achievements, and a rich, multi-faceted life journey.`;
                }
            }

            // Detailed reading functions for Head Line
            function getHeadLineLengthReading(length, direction, hand) {
                const handContext = hand === 'left' ? 'inherited intellectual capacity' : 'developed thinking abilities';
                
                let reading = '';
                if (length === 'very_long') {
                    reading = `Your ${handContext} indicate exceptional analytical powers and comprehensive thinking. You naturally see the big picture and details simultaneously. `;
                } else if (length === 'long') {
                    reading = `Your ${handContext} show strong intellectual depth and systematic thinking. You excel at complex problem-solving and strategic planning. `;
                } else if (length === 'moderate') {
                    reading = `Your ${handContext} demonstrate balanced intellectual approach, combining practicality with insight. You think efficiently and effectively. `;
                } else {
                    reading = `Your ${handContext} favor quick, intuitive decisions and practical intelligence. You excel at immediate problem-solving and rapid assessment. `;
                }
                
                if (direction === 'straight') {
                    reading += 'The straight direction indicates logical, methodical thinking and preference for facts and concrete information.';
                } else if (direction === 'slightly_curved') {
                    reading += 'The slight curve suggests creative logical thinking with touches of imagination and intuitive insight.';
                } else if (direction === 'curved') {
                    reading += 'The curved direction shows strong creative intelligence, artistic thinking, and imaginative problem-solving abilities.';
                } else {
                    reading += 'The pronounced curve indicates highly creative, intuitive thinking with strong artistic and imaginative capabilities.';
                }
                
                return reading;
            }
            
            function getHeadLineDepthReading(depth, separation, hand) {
                const handContext = hand === 'left' ? 'natural mental strength' : 'developed intellectual confidence';
                
                let reading = '';
                if (depth === 'very_deep') {
                    reading = `Your ${handContext} is exceptionally powerful. You possess intense concentration abilities and profound thinking capacity. `;
                } else if (depth === 'deep') {
                    reading = `Your ${handContext} shows strong mental focus and reliable intellectual abilities. You can sustain complex thinking for extended periods. `;
                } else if (depth === 'moderate') {
                    reading = `Your ${handContext} demonstrates balanced mental energy with good focus when needed. You think clearly and efficiently. `;
                } else {
                    reading = `Your ${handContext} tends toward flexibility and adaptability. You prefer varied mental stimulation and quick thinking. `;
                }
                
                if (separation === 'joined') {
                    reading += 'The connection to your life line indicates careful, security-conscious thinking and deliberate decision-making.';
                } else if (separation === 'slightly_separated') {
                    reading += 'The slight separation suggests balanced independence with some caution in decision-making.';
                } else if (separation === 'separated') {
                    reading += 'The clear separation indicates independent thinking, confidence in decisions, and natural leadership abilities.';
                } else {
                    reading += 'The wide separation shows exceptional independence, originality, and courageous thinking with innovative approaches.';
                }
                
                return reading;
            }
            
            function getHeadLineEndingReading(ending, chains, hand) {
                const handContext = hand === 'left' ? 'inherited thought patterns' : 'developed thinking style';
                
                let reading = '';
                if (ending === 'straight') {
                    reading = `Your ${handContext} culminate in practical, logical conclusions. You prefer concrete results and realistic approaches. `;
                } else if (ending === 'forked') {
                    reading = `Your ${handContext} show versatile thinking with ability to see multiple perspectives. You can balance different viewpoints effectively. `;
                } else if (ending === 'curved_down') {
                    reading = `Your ${handContext} indicate strong creative and intuitive culmination. You often find innovative solutions through inspiration. `;
                } else {
                    reading = `Your ${handContext} demonstrate complex, multi-faceted thinking with various intellectual directions and diverse interests. `;
                }
                
                if (chains === 'none') {
                    reading += 'The clear formation indicates consistent mental clarity and uninterrupted thought processes.';
                } else if (chains === 'beginning') {
                    reading += 'Chains at the beginning suggest initial learning phases and growing mental confidence.';
                } else if (chains === 'middle') {
                    reading += 'Central chains indicate periods of mental reorganization and intellectual growth.';
                } else {
                    reading += 'Throughout chains suggest complex thinking patterns with rich mental texture and varied approaches.';
                }
                
                return reading;
            }
            
            function getHeadLineIslandsReading(islands, hand) {
                const handContext = hand === 'left' ? 'inherited mental characteristics' : 'developed intellectual patterns';
                
                if (islands === 'none') {
                    return `Your ${handContext} show clear, uncluttered thinking with excellent mental clarity and focus.`;
                } else if (islands === 'few') {
                    return `A few islands in your ${handContext} indicate occasional periods of deep contemplation and intensive mental processing.`;
                } else {
                    return `Multiple islands suggest rich, complex thinking with periods of intensive mental work and deep intellectual exploration.`;
                }
            }

            // Detailed reading functions for Heart Line
            function getHeartLineCurveReading(curve, length, hand) {
                const handContext = hand === 'left' ? 'inherited emotional nature' : 'developed emotional approach';
                
                let reading = '';
                if (curve === 'high_curve') {
                    reading = `Your ${handContext} is deeply romantic and idealistic. You experience emotions intensely and seek meaningful, soulful connections. `;
                } else if (curve === 'moderate_curve') {
                    reading = `Your ${handContext} balances romance with practicality. You appreciate both emotional depth and realistic relationships. `;
                } else if (curve === 'slight_curve') {
                    reading = `Your ${handContext} tends toward practical emotional expression with subtle romantic undertones. You value stability in relationships. `;
                } else {
                    reading = `Your ${handContext} is direct and practical in emotional matters. You prefer clear communication and honest relationships. `;
                }
                
                if (length === 'very_long') {
                    reading += 'The exceptional length indicates generous emotional capacity and ability to form deep, lasting bonds with many people.';
                } else if (length === 'long') {
                    reading += 'The long line suggests strong emotional capacity and ability to maintain several meaningful relationships simultaneously.';
                } else if (length === 'moderate') {
                    reading += 'The moderate length indicates balanced emotional expression with focus on quality relationships.';
                } else {
                    reading += 'The shorter length suggests selective, intense emotional connections with preference for fewer, deeper relationships.';
                }
                
                return reading;
            }
            
            function getHeartLineDepthReading(depth, ending, hand) {
                const handContext = hand === 'left' ? 'natural emotional intensity' : 'developed emotional wisdom';
                
                let reading = '';
                if (depth === 'very_deep') {
                    reading = `Your ${handContext} is exceptionally profound. You experience emotions with great intensity and have remarkable emotional depth. `;
                } else if (depth === 'deep') {
                    reading = `Your ${handContext} shows strong emotional awareness and deep feeling capacity. You form meaningful emotional connections. `;
                } else if (depth === 'moderate') {
                    reading = `Your ${handContext} demonstrates balanced emotional expression with good emotional intelligence and stability. `;
                } else {
                    reading = `Your ${handContext} tends toward gentle, adaptable emotional expression with sensitivity to others' feelings. `;
                }
                
                if (ending === 'under_jupiter') {
                    reading += 'Ending under Jupiter finger indicates high emotional ideals and desire for noble, inspiring relationships.';
                } else if (ending === 'between_jupiter_saturn') {
                    reading += 'Ending between fingers suggests balanced emotional expression with both idealism and practicality.';
                } else if (ending === 'under_saturn') {
                    reading += 'Ending under Saturn indicates serious, committed approach to relationships with emphasis on responsibility.';
                } else {
                    reading += 'The forked ending shows complex emotional nature with ability to express different types of love and affection.';
                }
                
                return reading;
            }
            
            function getHeartLineBranchesReading(branches, chains, hand) {
                const handContext = hand === 'left' ? 'inherited emotional patterns' : 'developed relationship skills';
                
                let reading = '';
                if (branches === 'none') {
                    reading = `Your ${handContext} show focused, single-minded emotional expression and preference for exclusive, committed relationships. `;
                } else if (branches === 'upward') {
                    reading = `Upward branches in your ${handContext} indicate optimistic emotional outlook and ability to find joy and hope in relationships. `;
                } else if (branches === 'downward') {
                    reading = `Downward branches suggest deep emotional processing and ability to learn from relationship experiences. `;
                } else {
                    reading = `Multiple branches indicate complex emotional capacity with ability to love in various ways and maintain diverse relationships. `;
                }
                
                if (chains === 'none') {
                    reading += 'The clear formation shows consistent emotional flow and stable relationship patterns.';
                } else if (chains === 'few') {
                    reading += 'Light chains suggest occasional periods of emotional complexity and deepening understanding.';
                } else {
                    reading += 'Pronounced chains indicate rich emotional texture with complex relationship experiences and deep emotional learning.';
                }
                
                return reading;
            }
            
            function getHeartLineIslandsReading(islands, hand) {
                const handContext = hand === 'left' ? 'inherited emotional characteristics' : 'developed emotional insights';
                
                if (islands === 'none') {
                    return `Your ${handContext} show clear emotional expression and straightforward relationship approach.`;
                } else if (islands === 'few') {
                    return `A few islands indicate periods of emotional introspection and deeper understanding of relationship dynamics.`;
                } else {
                    return `Multiple islands suggest complex emotional experiences that have contributed to deep emotional wisdom and understanding.`;
                }
            }

            // Detailed reading functions for Fate Line
            function getFateLinePresenceReading(presence, origin, hand) {
                const handContext = hand === 'left' ? 'destined path' : 'chosen direction';
                
                let reading = '';
                if (presence === 'strong') {
                    reading = `Your ${handContext} is powerfully defined and clear. You have a strong sense of purpose and direction in life. `;
                } else if (presence === 'moderate') {
                    reading = `Your ${handContext} shows good direction with flexibility for adjustments. You balance purpose with adaptability. `;
                } else if (presence === 'weak') {
                    reading = `Your ${handContext} allows for freedom and self-determination. You create your own destiny through choices. `;
                } else {
                    reading = `Your ${handContext} emphasizes complete freedom and self-creation. You are the architect of your own destiny. `;
                }
                
                if (origin === 'wrist') {
                    reading += 'Starting from the wrist indicates early clarity of purpose and consistent life direction from youth.';
                } else if (origin === 'life_line') {
                    reading += 'Originating from the life line suggests that your personal growth directly influences your career and life direction.';
                } else if (origin === 'mount_moon') {
                    reading += 'Starting from the Moon mount indicates that imagination, intuition, and public interaction shape your destiny.';
                } else {
                    reading += 'Beginning in the middle palm suggests that your life direction emerges through experience and conscious choice.';
                }
                
                return reading;
            }
            
            function getFateLineDirectionReading(direction, breaks, hand) {
                const handContext = hand === 'left' ? 'natural life flow' : 'pursued life path';
                
                let reading = '';
                if (direction === 'straight') {
                    reading = `Your ${handContext} follows a direct, unwavering course. You pursue goals with determination and focus. `;
                } else if (direction === 'curved') {
                    reading = `Your ${handContext} shows flexibility and adaptation. You adjust your course based on opportunities and circumstances. `;
                } else {
                    reading = `Your ${handContext} indicates dynamic, varied approaches with multiple directions and diverse interests. `;
                }
                
                if (breaks === 'none') {
                    reading += 'The unbroken line indicates consistent progress and steady advancement throughout life.';
                } else if (breaks === 'minor') {
                    reading += 'Minor breaks suggest small career changes or adjustments that ultimately strengthen your path.';
                } else if (breaks === 'major') {
                    reading += 'Major breaks indicate significant life transformations and career redirections that lead to growth.';
                } else {
                    reading += 'Multiple breaks show a dynamic life with various career phases and continuous evolution.';
                }
                
                return reading;
            }
            
            function getFateLineBranchesReading(branches, islands, hand) {
                const handContext = hand === 'left' ? 'potential opportunities' : 'achieved successes';
                
                let reading = '';
                if (branches === 'none') {
                    reading = `Your ${handContext} show concentrated focus and singular dedication to your main life purpose. `;
                } else if (branches === 'few') {
                    reading = `Limited branches indicate selective opportunities that enhance your main direction without distraction. `;
                } else {
                    reading = `Multiple branches show diverse ${handContext} with various paths to success and achievement. `;
                }
                
                if (islands === 'none') {
                    reading += 'The clear path indicates smooth progress with minimal obstacles in your career journey.';
                } else if (islands === 'few') {
                    reading += 'A few islands suggest brief challenging periods that ultimately contribute to character building and wisdom.';
                } else {
                    reading += 'Several islands indicate complex career experiences that provide rich learning and eventual mastery.';
                }
                
                return reading;
            }

            // Detailed reading functions for Sun Line
            function getSunLinePresenceReading(presence, origin, hand) {
                const handContext = hand === 'left' ? 'natural charisma potential' : 'developed recognition abilities';
                
                let reading = '';
                if (presence === 'strong') {
                    reading = `Your ${handContext} is exceptionally powerful. You have natural magnetism and strong potential for public recognition and success. `;
                } else if (presence === 'moderate') {
                    reading = `Your ${handContext} shows good recognition abilities with potential for achievement and appreciation by others. `;
                } else if (presence === 'weak') {
                    reading = `Your ${handContext} operates through subtle influence and behind-the-scenes impact. You prefer meaningful contribution over public recognition. `;
                } else {
                    reading = `Your ${handContext} focuses on personal fulfillment rather than external recognition. You find satisfaction in private achievement. `;
                }
                
                if (origin === 'heart_line') {
                    reading += 'Starting from the heart line indicates that emotional satisfaction leads to your greatest achievements and recognition.';
                } else if (origin === 'head_line') {
                    reading += 'Originating from the head line suggests that intellectual pursuits and mental abilities bring you success and recognition.';
                } else if (origin === 'life_line') {
                    reading += 'Beginning from the life line indicates that personal growth and life experience contribute to your success.';
                } else {
                    reading += 'Starting from the wrist shows early potential for recognition with consistent development throughout life.';
                }
                
                return reading;
            }
            
            function getSunLineClarityReading(clarity, branches, hand) {
                const handContext = hand === 'left' ? 'inherent success patterns' : 'achieved recognition patterns';
                
                let reading = '';
                if (clarity === 'very_clear') {
                    reading = `Your ${handContext} are exceptionally well-defined, indicating clear path to recognition and outstanding achievement potential. `;
                } else if (clarity === 'clear') {
                    reading = `Your ${handContext} show good definition with reliable path to success and appreciation. `;
                } else {
                    reading = `Your ${handContext} operate through subtle channels with quiet influence and understated achievement. `;
                }
                
                if (branches === 'none') {
                    reading += 'The single line indicates focused success in one primary area with concentrated recognition.';
                } else if (branches === 'few') {
                    reading += 'Limited branches suggest success in related areas that complement your main achievement.';
                } else {
                    reading += 'Multiple branches indicate diverse talents with recognition in various fields and multifaceted success.';
                }
                
                return reading;
            }

            // Detailed reading functions for Marriage Lines
            function getMarriageLinesReading(number, depth, hand) {
                const handContext = hand === 'left' ? 'relationship potential' : 'relationship experiences';
                
                let reading = '';
                if (number === 'none') {
                    reading = `Your ${handContext} indicates a focus on self-development and independence. You may find fulfillment through non-traditional relationship paths. `;
                } else if (number === 'one') {
                    reading = `Your ${handContext} shows preference for one significant, deep relationship. You value commitment and exclusive partnership. `;
                } else if (number === 'two') {
                    reading = `Your ${handContext} indicates capacity for two important relationships, possibly sequential or representing different types of bonds. `;
                } else {
                    reading = `Your ${handContext} shows capacity for multiple meaningful connections with various types of relationships throughout life. `;
                }
                
                if (depth === 'deep') {
                    reading += 'The deep lines indicate profound, lasting emotional connections with significant impact on your life.';
                } else if (depth === 'moderate') {
                    reading += 'The moderate depth suggests meaningful relationships with good emotional connection and stability.';
                } else {
                    reading += 'The lighter lines indicate gentle, adaptable relationships with emotional flexibility and harmony.';
                }
                
                return reading;
            }
            
            function getMarriageDirectionReading(length, direction, hand) {
                const handContext = hand === 'left' ? 'relationship style potential' : 'relationship approach development';
                
                let reading = '';
                if (length === 'long') {
                    reading = `Your ${handContext} indicates extensive, comprehensive relationships with deep emotional involvement and long duration. `;
                } else if (length === 'moderate') {
                    reading = `Your ${handContext} shows balanced relationship approach with good emotional investment and practical consideration. `;
                } else {
                    reading = `Your ${handContext} suggests focused, intense relationships with preference for quality over duration. `;
                }
                
                if (direction === 'straight') {
                    reading += 'The straight direction indicates honest, direct relationship communication and straightforward emotional expression.';
                } else if (direction === 'curved_up') {
                    reading += 'The upward curve suggests optimistic relationship outlook with happiness and fulfillment in partnerships.';
                } else {
                    reading += 'The downward curve indicates some relationship challenges that ultimately lead to wisdom and deeper understanding.';
                }
                
                return reading;
            }

            // Detailed reading functions for Travel Lines
            function getTravelLinesReading(number, clarity, hand) {
                const handContext = hand === 'left' ? 'natural wanderlust' : 'travel experiences';
                
                let reading = '';
                if (number === 'none') {
                    reading = `Your ${handContext} indicates contentment with familiar environments and focus on local experiences and deep roots. `;
                } else if (number === 'few') {
                    reading = `Your ${handContext} shows selective travel with meaningful journeys that provide significant personal growth. `;
                } else if (number === 'several') {
                    reading = `Your ${handContext} indicates good balance of travel and stability with various enriching journey experiences. `;
                } else {
                    reading = `Your ${handContext} shows strong desire for diverse experiences with extensive travel and cultural exploration. `;
                }
                
                if (clarity === 'clear') {
                    reading += 'The clear lines indicate well-planned, successful journeys with significant positive impact on your life development.';
                } else if (clarity === 'moderate') {
                    reading += 'The moderate clarity suggests travel experiences that provide learning and growth with some challenges to overcome.';
                } else {
                    reading += 'The lighter lines indicate spontaneous travel opportunities and flexible approach to journey experiences.';
                }
                
                return reading;
            }

            function getTravelDirectionReading(direction, connection, hand) {
                const handContext = hand === 'left' ? 'inherited travel nature' : 'developed travel style';
                
                let reading = '';
                if (direction === 'horizontal') {
                    reading = `Your ${handContext} favors traditional travel paths and well-established routes. `;
                } else if (direction === 'diagonal') {
                    reading = `Your ${handContext} shows preference for adventurous, off-the-beaten-path journeys. `;
                } else {
                    reading = `Your ${handContext} indicates varied travel styles, from conventional to highly adventurous. `;
                }
                
                if (connection === 'life_line') {
                    reading += 'Connected to life line suggests travel deeply impacts personal growth and life changes.';
                } else if (connection === 'fate_line') {
                    reading += 'Connected to fate line indicates travel influences career and major life direction.';
                } else {
                    reading += 'Independent lines suggest travel for pure enjoyment and personal enrichment.';
                }
                
                return reading;
            }

            // Health Line reading functions
            function getHealthLineReading(presence, clarity, hand) {
                const handContext = hand === 'left' ? 'inherited health awareness' : 'developed wellness approach';
                
                let reading = '';
                if (presence === 'strong') {
                    reading = `Your ${handContext} is exceptionally well-developed. You have natural awareness of health matters and strong connection to your body's needs. `;
                } else if (presence === 'moderate') {
                    reading = `Your ${handContext} shows good health consciousness with balanced attention to wellness. `;
                } else {
                    reading = `Your ${handContext} operates through subtle body awareness and intuitive health understanding. `;
                }
                
                if (clarity === 'clear') {
                    reading += 'The clear formation indicates excellent health awareness and ability to maintain wellness through conscious choices.';
                } else if (clarity === 'broken') {
                    reading += 'The broken pattern suggests periods of health challenges that lead to greater awareness and stronger constitution.';
                } else {
                    reading += 'The wavy formation indicates sensitivity to environmental factors and need for gentle health approaches.';
                }
                
                return reading;
            }

            function getHealthPositionReading(position, hand) {
                const handContext = hand === 'left' ? 'natural health focus' : 'developed health priorities';
                
                if (position === 'close_life_line') {
                    return `Your ${handContext} is closely connected to vitality and life force, indicating strong overall constitutional health.`;
                } else if (position === 'middle_palm') {
                    return `Your ${handContext} balances physical and mental health, with attention to both body and mind wellness.`;
                } else {
                    return `Your ${handContext} emphasizes environmental and social factors in health, including community and relationships.`;
                }
            }

            // Intuition Line reading functions
            function getIntuitionLineReading(presence, curve, hand) {
                const handContext = hand === 'left' ? 'inherited psychic ability' : 'developed intuitive skills';
                
                let reading = '';
                if (presence === 'strong') {
                    reading = `Your ${handContext} is remarkably powerful. You possess natural psychic sensitivity and strong connection to inner wisdom. `;
                } else if (presence === 'moderate') {
                    reading = `Your ${handContext} shows good intuitive capacity with reliable inner guidance and spiritual awareness. `;
                } else {
                    reading = `Your ${handContext} operates through subtle impressions and gentle inner knowing. `;
                }
                
                if (curve === 'pronounced') {
                    reading += 'The pronounced curve indicates exceptional sensitivity to subtle energies and strong mediumistic abilities.';
                } else if (curve === 'moderate') {
                    reading += 'The moderate curve suggests balanced intuition with practical application of psychic insights.';
                } else {
                    reading += 'The gentle curve indicates quiet intuitive wisdom that guides through subtle impressions and feelings.';
                }
                
                return reading;
            }

            // Money Lines reading functions
            function getMoneyLinesReading(number, clarity, hand) {
                const handContext = hand === 'left' ? 'inherited wealth potential' : 'developed financial abilities';
                
                let reading = '';
                if (number === 'several') {
                    reading = `Your ${handContext} indicates multiple streams of income and diverse financial opportunities. You have natural ability to create wealth through various channels. `;
                } else if (number === 'few') {
                    reading = `Your ${handContext} shows focused financial success with select, profitable ventures. You prefer quality over quantity in wealth building. `;
                }
                
                if (clarity === 'clear') {
                    reading += 'The clear lines indicate strong financial acumen and ability to recognize and capitalize on money-making opportunities.';
                } else {
                    reading += 'The fainter lines suggest wealth that comes through patience, persistence, and gradual accumulation rather than sudden windfalls.';
                }
                
                return reading;
            }
        });
    </script>
</body>
</html>